<html>
<head>
<script src="socket.io.js"></script>
<script src="jquery.js"></script>
<script>
function init() {
	var socket = io.connect();

	socket.on('time', function(time){
    	$('#clock').html(time.clock);
  	});

	printMatchList();
  	
};

function printMatchList() {
	var jqxhr = $.ajax( "api/match" )
  	.done(function(data) {
  		var html = '';
    	for(var i in data) {
    		html += '<button onclick="getMatch(\'' + data[i]._id + '\')">Match ' + data[i]._id + '</button>'
    	}
    	$('#matchlist').html(html);
  	})
  	.fail(function() {
    	alert( "error" );
  	})
}

function createMatch() {
	var jqxhr = $.post( "api/match" )
  	.done(function(data) {
  		printMatchList();
  	})
  	.fail(function() {
    	alert( "error" );
  	})
}

function getMatch(id) {
	
	var jqxhr = $.ajax( "api/match/" + id)
  	.done(function(data) {
  		matchId = id;
  		
  	})
  	.fail(function() {
    	alert( "error" );
  	})
};

function pauseResume() {
	var jqxhr = $.ajax( 'api/match/' + matchId + '/pauseresume' )
  	.done(function() {
  		
  	})
  	.fail(function() {
    	alert( "error" );
  	})
}


</script>
</head>
<body onload="init()">
<div id="clock">

</div>

<div id="matchlist">

</div>
<button onclick="pauseResume()">Pause / Resume</button>
<button onclick="createMatch()">New Match</button>
</body>
</html>